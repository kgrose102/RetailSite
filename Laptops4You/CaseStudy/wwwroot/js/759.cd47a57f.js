"use strict";(globalThis["webpackChunkcasestudyserver"]=globalThis["webpackChunkcasestudyserver"]||[]).push([[759],{2403:(t,e,a)=>{a.d(e,{G:()=>o,W:()=>n});const s="localhost"===window.location.hostname?"https://localhost:7261/api/":"/api/",o=async t=>{let e,a=r();try{let o=await fetch(`${s}${t}`,{method:"GET",headers:a});e=await o.json()}catch(t){console.log(t),e={error:`Error has occured: ${t.message}`}}return e},n=async(t,e)=>{let a,o=r();try{let n=await fetch(`${s}${t}`,{method:"POST",headers:o,body:JSON.stringify(e)});a=await n.json()}catch(t){a=t}return a},r=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},7759:(t,e,a)=>{a.r(e),a.d(e,{default:()=>f});var s=a(1347),o=a(8633);const n={class:"text-center q-mt-md"},r={style:{height:"40vh",width:"90vw","margin-left":"5vw",border:"solid"},ref:"mapRef"};function l(t,e,a,l,c,d){const i=(0,s.g2)("q-avatar"),u=(0,s.g2)("q-input"),h=(0,s.g2)("q-btn");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(i,{class:"q-mb-lg q-mt-lg",size:"100px",square:""},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.Lk)("img",{src:"/img/casestudylogo.png"},null,-1)]))),_:1,__:[1]}),e[3]||(e[3]=(0,s.Lk)("div",{class:"text-h6"},"Find 3 Closest Branches to:",-1)),(0,s.Lk)("div",null,[(0,s.bF)(u,{class:"q-ma-lg text-h5",placeholder:"enter address",id:"address",modelValue:l.state.address,"onUpdate:modelValue":e[0]||(e[0]=t=>l.state.address=t)},null,8,["modelValue"]),e[2]||(e[2]=(0,s.Lk)("br",null,null,-1))]),(0,s.bF)(h,{label:"Find 3",onClick:l.genMap,class:"q-mb-md",style:{width:"30vw"}},null,8,["onClick"]),(0,s.bo)((0,s.Lk)("div",r,null,512),[[o.aG,!0===l.state.showmap]])])}a(939),a(4520),a(7049);var c=a(4187),d=a(2403);const i={name:"BranchLocator",setup(){const t=(0,c.KR)(null);let e=(0,c.Kh)({status:"",address:"",showmap:!1});const a=async t=>{try{let e=`https://api.tomtom.com/search/2/geocode/${t}.json?key=F9ZV7dWJ4mf0dhfylgA6EH2awDsZ7fEY `,a=await fetch(e),s=await a.json();return s.results[0].position}catch(t){e.status=t.message}},s=async(t,a)=>{try{let e=await(0,d.G)(`branch/${t}/${a}`);return e}catch(t){e.status=t.message}},o=async()=>{try{e.showmap=!0;const o=window.tt;let n=`https://api.tomtom.com/search/2/geocode/${e.address}.json?key=F9ZV7dWJ4mf0dhfylgA6EH2awDsZ7fEY`,r=await fetch(n),l=await r.json(),c=l.results[0].position.lat,d=l.results[0].position.lon,i=o.map({key:"F9ZV7dWJ4mf0dhfylgA6EH2awDsZ7fEY",container:t.value,source:"vector/1/basic-main",center:[d,c],zoom:8});i.addControl(new o.FullscreenControl),i.addControl(new o.NavigationControl);let u=await a(e.address),h=await s(u.lat,u.lon);h.forEach((t=>{let e=(new o.Marker).setLngLat([t.longitude,t.latitude]).addTo(i),a=25,s=new o.Popup({offset:a});s.setHTML(`<div id="popup">Branch #: ${t.id}</div><div>${t.street}, ${t.city}\n            <br/>${t.distance.toFixed(2)} km</div>`),e.setPopup(s)}))}catch(t){e.status=t.message}};return{mapRef:t,state:e,genMap:o,getLatLon:a,getClosestBranches:s}}};var u=a(2968),h=a(5305),p=a(6067),m=a(9039),g=a(272),w=a.n(g);const y=(0,u.A)(i,[["render",l]]),f=y;w()(i,"components",{QAvatar:h.A,QInput:p.A,QBtn:m.A})}}]);