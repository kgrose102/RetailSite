"use strict";(globalThis["webpackChunkcasestudyserver"]=globalThis["webpackChunkcasestudyserver"]||[]).push([[280],{2403:(e,t,s)=>{s.d(t,{G:()=>l,W:()=>r});const a="localhost"===window.location.hostname?"https://localhost:7261/api/":"/api/",l=async e=>{let t,s=o();try{let l=await fetch(`${a}${e}`,{method:"GET",headers:s});t=await l.json()}catch(e){console.log(e),t={error:`Error has occured: ${e.message}`}}return t},r=async(e,t)=>{let s,l=o();try{let r=await fetch(`${a}${e}`,{method:"POST",headers:l,body:JSON.stringify(t)});s=await r.json()}catch(e){s=e}return s},o=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e}},7280:(e,t,s)=>{s.r(t),s.d(t,{default:()=>q});var a=s(1347),l=s(7763);const r={class:"text-title2 text-center text-positive text-bold q-mt-sm"};function o(e,t,s,o,n,i){const d=(0,a.g2)("q-input"),u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-form"),m=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[t[2]||(t[2]=(0,a.Lk)("div",{class:"text-h4 text-center q-mt-md q-mb-md text-primary"},"Login",-1)),(0,a.Lk)("div",r,(0,l.v_)(o.state.status),1),(0,a.bF)(m,{class:"q-ma-md q-pa-md"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{ref:"myForm",class:"q-gutter-md",greedy:"",onSubmit:o.login,onReset:o.resetFields},{default:(0,a.k6)((()=>[(0,a.bF)(d,{outlined:"",placeholder:"email input",id:"email",modelValue:o.state.email,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.email=e),rules:[o.isRequired,o.isValidEmail]},null,8,["modelValue","rules"]),(0,a.bF)(d,{outlined:"",placeholder:"password input",id:"password",modelValue:o.state.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.password=e),rules:[o.isRequired],type:"password"},null,8,["modelValue","rules"]),(0,a.bF)(u,{label:"Login",type:"submit"}),(0,a.bF)(u,{label:"Reset",type:"reset"})])),_:1},8,["onSubmit","onReset"])])),_:1})],64)}var n=s(4187),i=s(2403),d=s(455);const u={setup(){const e=(0,d.rd)(),t=(0,d.lq)();let s=(0,n.Kh)({status:"",email:"",password:""});const a=e=>!!e||"field is required",l=async()=>{let a={email:s.email,password:s.password};try{let l=await(0,i.W)("Customer/Login",a);l.token.includes("failed")?s.status=l.token:(sessionStorage.setItem("customer",JSON.stringify(l)),s.status="login successfull",t.query.nextUrl?e.push({path:t.query.nextUrl}):e.push({path:"/"}))}catch(e){s.status=e.message}},r=()=>{s.status="",s.firstname="",s.lastname="",s.email="",s.password=""},o=e=>{const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"};return{state:s,login:l,isRequired:a,resetFields:r,isValidEmail:o}}};var c=s(2968),m=s(3341),p=s(3417),h=s(6067),g=s(9039),y=s(272),b=s.n(y);const w=(0,c.A)(u,[["render",o]]),q=w;b()(u,"components",{QCard:m.A,QForm:p.A,QInput:h.A,QBtn:g.A})}}]);