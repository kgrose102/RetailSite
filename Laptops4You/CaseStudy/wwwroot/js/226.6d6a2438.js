"use strict";(globalThis["webpackChunkcasestudyserver"]=globalThis["webpackChunkcasestudyserver"]||[]).push([[226],{2403:(t,e,l)=>{l.d(e,{G:()=>s,W:()=>r});const a="localhost"===window.location.hostname?"https://localhost:7261/api/":"/api/",s=async t=>{let e,l=o();try{let s=await fetch(`${a}${t}`,{method:"GET",headers:l});e=await s.json()}catch(t){console.log(t),e={error:`Error has occured: ${t.message}`}}return e},r=async(t,e)=>{let l,s=o();try{let r=await fetch(`${a}${t}`,{method:"POST",headers:s,body:JSON.stringify(e)});l=await r.json()}catch(t){l=t}return l},o=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},3226:(t,e,l)=>{l.r(e),l.d(e,{default:()=>z});var a=l(1347),s=l(7763);const r={class:"text-center qmt-md"},o={class:"text-h6 text-positive"},n=["onClick"],i={class:"text-left"},c={class:"text-left"},d={class:"text-h4 text-primart text-center"},u={class:"text-h6 text-primart text-center"},m={class:"text-center"},h={class:"text-left",style:{width:"25%"}},k={class:"text-center",style:{width:"15%"}},p={class:"text-center",style:{width:"15%"}},x={class:"text-center",style:{width:"15%"}},g={class:"text-left",style:{width:"60%"}},y={class:"text-left"},L={class:"text-left"},f={class:"text-left"},_={class:"text-left"},v={class:"text-left text-primary"},w={class:"text-left"},b={class:"text-h6 text-positive text-center q-mb-md"};function q(t,e,l,q,D,A){const F=(0,a.g2)("q-avatar"),I=(0,a.g2)("q-markup-table"),C=(0,a.g2)("q-scroll-area"),T=(0,a.g2)("q-btn"),$=(0,a.g2)("q-card-actions"),S=(0,a.g2)("q-card-section"),O=(0,a.g2)("q-item-section"),Q=(0,a.g2)("q-item"),E=(0,a.g2)("q-card"),N=(0,a.g2)("q-dialog"),P=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)("div",r,[e[20]||(e[20]=(0,a.Lk)("div",{class:"text-h2 q-mt-lg"},"Order History",-1)),(0,a.bF)(F,{class:"q-mb-lg q-mt-lg",size:"100px",square:""},{default:(0,a.k6)((()=>e[1]||(e[1]=[(0,a.Lk)("img",{src:"/img/casestudylogo.png"},null,-1)]))),_:1,__:[1]}),(0,a.Lk)("div",o,(0,s.v_)(q.state.status),1),(0,a.bF)(C,{style:{height:"55vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(I,{class:"q-ma-md",separator:"cell"},{default:(0,a.k6)((()=>[e[2]||(e[2]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"text-left text-primary"},"Order #"),(0,a.Lk)("th",{class:"text-left text-primary"},"Date")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(q.state.carts,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id,clickable:"",onClick:e=>q.loadDetails(t)},[(0,a.Lk)("td",i,(0,s.v_)(t.id),1),(0,a.Lk)("td",c,(0,s.v_)(q.formatDate(t.dateCreated)),1)],8,n)))),128))])])),_:1,__:[2]})])),_:1}),(0,a.bF)(N,{modelValue:q.state.showDetails,"onUpdate:modelValue":e[0]||(e[0]=t=>q.state.showDetails=t),"transition-show":"rotate","transition-hide":"rotate"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{style:{width:"90vw"}},{default:(0,a.k6)((()=>[(0,a.bF)($,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(T,{flat:"",label:"X",color:"primary",class:"text-h5"},null,512),[[P]])])),_:1}),(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,"Order: "+(0,s.v_)(q.state.cartInDetail.id),1),(0,a.Lk)("div",u,(0,s.v_)(q.formatDate(q.state.cartInDetail.dateCreated)),1)])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",m,[(0,a.bF)(F,{size:"4rem"},{default:(0,a.k6)((()=>e[3]||(e[3]=[(0,a.Lk)("img",{src:"/img/casestudylogo.png"},null,-1)]))),_:1,__:[3]})])])),_:1}),(0,a.bF)(C,{style:{height:"50vh","margin-top":"1rem"}},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{style:{bottom:"-2vh"}},{default:(0,a.k6)((()=>[(0,a.bF)(O,{class:"q-ml-sm text-h6 text-primary text-left"},{default:(0,a.k6)((()=>e[4]||(e[4]=[(0,a.eW)("Name")]))),_:1,__:[4]}),(0,a.bF)(O,{class:"q-ml-sm text-h6 text-primary text-left"},{default:(0,a.k6)((()=>e[5]||(e[5]=[(0,a.eW)("Quantities")]))),_:1,__:[5]}),(0,a.bF)(O,{class:"q-ml-sm text-h6 text-primary text-left"},{default:(0,a.k6)((()=>e[6]||(e[6]=[(0,a.eW)("Price")]))),_:1,__:[6]})])),_:1}),(0,a.bF)(I,{class:"q-ma-md",separator:"cell","wrap-cells":"",style:{width:"100%"}},{default:(0,a.k6)((()=>[e[19]||(e[19]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"text-center text-primary",style:{width:"25%"}}),(0,a.Lk)("th",{class:"text-center text-primary",style:{width:"15%"}},"S"),(0,a.Lk)("th",{class:"text-center text-primary",style:{width:"15%"}},"O"),(0,a.Lk)("th",{class:"text-center text-primary",style:{width:"15%"}},"B"),(0,a.Lk)("th",{class:"text-center text-primary",style:{width:"60%"}})])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(q.state.itemInDetail,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.orderItemId},[(0,a.Lk)("td",h,(0,s.v_)(t.productName),1),(0,a.Lk)("td",k,(0,s.v_)(t.quantitySold),1),(0,a.Lk)("td",p,(0,s.v_)(t.quantityOrdered),1),(0,a.Lk)("td",x,(0,s.v_)(t.quantityBackOrdered),1),(0,a.Lk)("td",g,"$"+(0,s.v_)(t.costPrice),1)])))),128)),(0,a.Lk)("tr",y,[e[7]||(e[7]=(0,a.Lk)("td",null,null,-1)),e[8]||(e[8]=(0,a.Lk)("td",null,null,-1)),e[9]||(e[9]=(0,a.Lk)("td",null,null,-1)),e[10]||(e[10]=(0,a.Lk)("td",{class:"text-left",style:{"font-weight":"800"}},"Sub",-1)),(0,a.Lk)("td",L,"$"+(0,s.v_)(q.state.priceTotal),1)]),(0,a.Lk)("tr",f,[e[11]||(e[11]=(0,a.Lk)("td",null,null,-1)),e[12]||(e[12]=(0,a.Lk)("td",null,null,-1)),e[13]||(e[13]=(0,a.Lk)("td",null,null,-1)),e[14]||(e[14]=(0,a.Lk)("td",{class:"text-left",style:{"font-weight":"800"}},"Tax(13%):",-1)),(0,a.Lk)("td",_,"$"+(0,s.v_)(q.state.taxAmount),1)]),(0,a.Lk)("tr",v,[e[15]||(e[15]=(0,a.Lk)("td",null,null,-1)),e[16]||(e[16]=(0,a.Lk)("td",null,null,-1)),e[17]||(e[17]=(0,a.Lk)("td",null,null,-1)),e[18]||(e[18]=(0,a.Lk)("td",{class:"text-left text-primary",style:{"font-weight":"800"}},"Total:",-1)),(0,a.Lk)("td",w,"$"+(0,s.v_)(q.state.totalAmount),1)])])])),_:1,__:[19]})])),_:1}),(0,a.Lk)("div",b,(0,s.v_)(q.state.status),1)])),_:1})])),_:1},8,["modelValue"])])}l(939),l(4520);var D=l(4187),A=l(2403);const F=t=>{let e=new Date(Date.parse(t)),l=e.getFullYear(),a=e.getMonth()+1;a<10&&(a="0"+a);let s=e.getDate();return s<10&&(s="0"+s),l+"-"+a+"-"+s},I={setup(){let t=(0,D.Kh)({status:"",carts:[],cartInDetail:null,itemInDetail:[],showDetails:!1,priceTotal:0,taxAmount:0,totalAmount:0});const e=async()=>{let e=JSON.parse(sessionStorage.getItem("customer"));try{t.status="Loading Purchases...";let l=await(0,A.G)(`order/${e.email}`);t.carts=l,console.log(l),t.status=`${l.length} previous purchases loaded`}catch(e){console.log(e),t.status=e.message}},l=async e=>{t.cartInDetail=e,console.log("Cart In Detail:"),console.log(t.cartInDetail);try{t.status=`Loading Order ${e.id} details...`;let l=await(0,A.G)(`order/details/${e.id}`);console.log("Item In Detail:"),console.log(l),t.itemInDetail=l,t.itemInDetail.forEach(s),t.taxAmount=(.13*t.priceTotal).toFixed(2),t.totalAmount=(1.13*t.priceTotal).toFixed(2),t.status=`Order ${e.id} details loaded!`,t.showDetails=!0}catch(e){console.log(e),t.status=e.message}};function s(e){e.quantitySold>0&&(t.priceTotal+=e.costPrice)}return(0,a.sV)(e),{state:t,formatDate:F,loadDetails:l}}};var C=l(2968),T=l(5305),$=l(6783),S=l(4362),O=l(2540),Q=l(3341),E=l(5034),N=l(9039),P=l(222),X=l(4958),j=l(2589),B=l(8657),G=l(272),V=l.n(G);const W=(0,C.A)(I,[["render",q]]),z=W;V()(I,"components",{QAvatar:T.A,QScrollArea:$.A,QMarkupTable:S.A,QDialog:O.A,QCard:Q.A,QCardActions:E.A,QBtn:N.A,QCardSection:P.A,QItemSection:X.A,QItem:j.A}),V()(I,"directives",{ClosePopup:B.A})}}]);